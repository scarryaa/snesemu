#ifndef INSTRUCTION_HPP
#define INSTRUCTION_HPP

#include <stdint.h>
#include "addressing_mode.hpp"
#include "opcode.hpp"

typedef struct {
    uint32_t address;
    uint8_t opcode;
    uint16_t operand1;
    uint16_t operand2;
    uint8_t bytes[3];
    uint16_t length;
    const char* mnemonic;
    AddressingMode addressingMode;
} Instruction;

OpcodeInfo instructionTable[] = {
    { "BRK", 0x00, kImmediate8, 2 },
    { "ORA", 0x01, kDirectPageIndirectX, 2 },
    { "COP", 0x02, kImmediate8, 2 },
    { "ORA", 0x03, kStackRelative, 2 },
    { "TSB", 0x04, kDirectPage, 2 },
    { "ORA", 0x05, kDirectPage, 2 },
    { "ASL", 0x06, kDirectPage, 2 },
    { "ORA", 0x07, kDirectPageIndirectLong, 2 },
    { "PHP", 0x08, kNone, 1 },
    { "ORA", 0x09, kImmediate, 2 },
    { "ASL", 0x0A, kAccumulator, 2 },
    { "PHD", 0x0B, kNone, 1 },
    { "TSB", 0x0C, kAbsolute, 3 },
    { "ORA", 0x0D, kAbsolute, 3 },
    { "ASL", 0x0E, kAbsolute, 3 },
    { "ORA", 0x0F, kAbsoluteLong, 4 },
    { "BPL", 0x10, kBranch, 2 },
    { "ORA", 0x11, kDirectPageIndirectIndexedY, 2 },
    { "ORA", 0x12, kDirectPageIndirect, 2 },
    { "ORA", 0x13, kStackRelativeIndirectIndexedY, 2 },
    { "TRB", 0x14, kDirectPage, 2 },
    { "ORA", 0x15, kDirectPageIndexedX, 2 },
    { "ASL", 0x16, kDirectPageIndexedX, 2 },
    { "ORA", 0x17, kDirectPageIndirectLongIndexedY, 2 },
    { "CLC", 0x18, kNone, 1 },
    { "ORA", 0x19, kAbsoluteIndexedY, 3 },
    { "INC", 0x1A, kNone, 1 },
    { "TCS", 0x1B, kNone, 1 },
    { "TRB", 0x1C, kAbsolute, 3 },
    { "ORA", 0x1D, kAbsoluteIndexedX, 3 },
    { "ASL", 0x1E, kAbsoluteIndexedX, 3 },
    { "ORA", 0x1F, kAbsoluteLongIndexedX, 4 },
    { "JSR", 0x20, kAbsolute, 3 },
    { "AND", 0x21, kDirectPageIndirectX, 2 },
    { "JSL", 0x22, kAbsoluteLong, 4 },
    { "AND", 0x23, kStackRelative, 2 },
    { "BIT", 0x24, kDirectPage, 2 },
    { "AND", 0x25, kDirectPage, 2 },
    { "ROL", 0x26, kDirectPage, 2 },
    { "AND", 0x27, kDirectPageIndirectLong, 2 },
    { "PLP", 0x28, kNone, 1 },
    { "AND", 0x29, kImmediate, 2 },
    { "ROL", 0x2A, kAccumulator, 2 },
    { "PLD", 0x2B, kNone, 1 },
    { "BIT", 0x2C, kAbsolute, 3 },
    { "AND", 0x2D, kAbsolute, 3 },
    { "ROL", 0x2E, kAbsolute, 3 },
    { "AND", 0x2F, kAbsoluteLong, 4 },
    { "BMI", 0x30, kBranch, 2 },
    { "AND", 0x31, kDirectPageIndirectIndexedY, 2 },
    { "AND", 0x32, kDirectPageIndirect, 2 },
    { "AND", 0x33, kStackRelativeIndirectIndexedY, 2 },
    { "BIT", 0x34, kDirectPageIndexedX, 2 },
    { "AND", 0x35, kDirectPageIndexedX, 2 },
    { "ROL", 0x36, kDirectPageIndexedX, 2 },
    { "AND", 0x37, kDirectPageIndirectLongIndexedY, 2 },
    { "SEC", 0x38, kNone, 1 },
    { "AND", 0x39, kAbsoluteIndexedY, 3 },
    { "DEC", 0x3A, kNone, 1 },
    { "TSC", 0x3B, kNone, 1 },
    { "BIT", 0x3C, kAbsoluteIndexedX, 3 },
    { "AND", 0x3D, kAbsoluteIndexedX, 3 },
    { "ROL", 0x3E, kAbsoluteIndexedX, 3 },
    { "AND", 0x3F, kAbsoluteLongIndexedX, 4 },
    { "RTI", 0x40, kNone, 1 },
    { "EOR", 0x41, kDirectPageIndirectX, 2 },
    { "WDM", 0x42, kNone, 2 },
    { "EOR", 0x43, kStackRelative, 2 },
    { "MVP", 0x44, kBlockMove, 3 },
    { "EOR", 0x45, kDirectPage, 2 },
    { "LSR", 0x46, kDirectPage, 2 },
    { "EOR", 0x47, kDirectPageIndirectLong, 2 },
    { "PHA", 0x48, kNone, 1 },
    { "EOR", 0x49, kImmediate, 2 },
    { "LSR", 0x4A, kAccumulator, 2 },
    { "PHK", 0x4B, kNone, 1 },
    { "JMP", 0x4C, kAbsolute, 3 },
    { "EOR", 0x4D, kAbsolute, 3 },
    { "LSR", 0x4E, kAbsolute, 3 },
    { "EOR", 0x4F, kAbsoluteLong, 4 },
    { "BVC", 0x50, kBranch, 2 },
    { "EOR", 0x51, kDirectPageIndirectIndexedY, 2 },
    { "EOR", 0x52, kDirectPageIndirect, 2 },
    { "EOR", 0x53, kStackRelativeIndirectIndexedY, 2 },
    { "MVN", 0x54, kBlockMove, 3 },
    { "EOR", 0x55, kDirectPageIndexedX, 2 },
    { "LSR", 0x56, kDirectPageIndexedX, 2 },
    { "EOR", 0x57, kDirectPageIndirectLongIndexedY, 2 },
    { "CLI", 0x58, kNone, 1 },
    { "EOR", 0x59, kAbsoluteIndexedY, 3 },
    { "PHY", 0x5A, kNone, 1 },
    { "TCD", 0x5B, kNone, 1 },
    { "JMP", 0x5C, kAbsoluteLong, 4 },
    { "EOR", 0x5D, kAbsoluteIndexedX, 3 },
    { "LSR", 0x5E, kAbsoluteIndexedX, 3 },
    { "EOR", 0x5F, kAbsoluteLongIndexedX, 4 },
    { "RTS", 0x60, kNone, 1 },
    { "ADC", 0x61, kDirectPageIndirectX, 2 },
    { "PER", 0x62, kRelativeLong, 3 },
    { "ADC", 0x63, kStackRelative, 2 },
    { "STZ", 0x64, kDirectPage, 2 },
    { "ADC", 0x65, kDirectPage, 2 },
    { "ROR", 0x66, kDirectPage, 2 },
    { "ADC", 0x67, kDirectPageIndirectLong, 2 },
    { "PLA", 0x68, kNone, 1 },
    { "ADC", 0x69, kImmediate, 2 },
    { "ROR", 0x6A, kAccumulator, 2 },
    { "RTL", 0x6B, kNone, 1 },
    { "JMP", 0x6C, kAbsoluteIndirect, 3 },
    { "ADC", 0x6D, kAbsolute, 3 },
    { "ROR", 0x6E, kAbsolute, 3 },
    { "ADC", 0x6F, kAbsoluteLong, 4 },
    { "BVS", 0x70, kBranch, 2 },
    { "ADC", 0x71, kDirectPageIndirectIndexedY, 2 },
    { "ADC", 0x72, kDirectPageIndirect, 2 },
    { "ADC", 0x73, kStackRelativeIndirectIndexedY, 2 },
    { "STZ", 0x74, kDirectPageIndexedX, 2 },
    { "ADC", 0x75, kDirectPageIndexedX, 2 },
    { "ROR", 0x76, kDirectPageIndexedX, 2 },
    { "ADC", 0x77, kDirectPageIndirectLongIndexedY, 2 },
    { "SEI", 0x78, kNone, 1 },
    { "ADC", 0x79, kAbsoluteIndexedY, 3 },
    { "PLY", 0x7A, kNone, 1 },
    { "TDC", 0x7B, kNone, 1 },
    { "JMP", 0x7C, kAbsoluteIndexedIndirectX, 3 },
    { "ADC", 0x7D, kAbsoluteIndexedX, 3 },
    { "ROR", 0x7E, kAbsoluteIndexedX, 3 },
    { "ADC", 0x7F, kAbsoluteLongIndexedX, 4 },
    { "BRA", 0x80, kRelative, 2 },
    { "STA", 0x81, kDirectPageIndirectX, 2 },
    { "BRL", 0x82, kRelativeLong, 3 },
    { "STA", 0x83, kStackRelativeIndirectIndexedY, 2 },
    { "STY", 0x84, kDirectPage, 2 },
    { "STA", 0x85, kDirectPage, 2 },
    { "STX", 0x86, kDirectPage, 2 },
    { "STA", 0x87, kDirectPageIndirectLong, 2 },
    { "DEY", 0x88, kNone, 1 },
    { "BIT", 0x89, kImmediate, 2 },
    { "TXA", 0x8A, kNone, 1 },
    { "PHB", 0x8B, kNone, 1 },
    { "STY", 0x8C, kAbsolute, 3 },
    { "STA", 0x8D, kAbsolute, 3 },
    { "STX", 0x8E, kAbsolute, 3 },
    { "STA", 0x8F, kAbsoluteLong, 4 },
    { "BCC", 0x90, kBranch, 2 },
    { "STA", 0x91, kDirectPageIndirectIndexedY, 2 },
    { "STA", 0x92, kDirectPageIndirect, 2 },
    { "STA", 0x93, kStackRelativeIndirectIndexedY, 2 },
    { "STY", 0x94, kDirectPageIndexedX, 2 },
    { "STA", 0x95, kDirectPageIndexedX, 2 },
    { "STX", 0x96, kDirectPageIndexedY, 2 },
    { "STA", 0x97, kDirectPageIndirectLongIndexedY, 2 },
    { "TYA", 0x98, kNone, 1 },
    { "STA", 0x99, kAbsoluteIndexedY, 3 },
    { "TXS", 0x9A, kNone, 1 },
    { "TXY", 0x9B, kNone, 1 },
    { "STZ", 0x9C, kAbsolute, 3 },
    { "STA", 0x9D, kAbsoluteIndexedX, 3 },
    { "STZ", 0x9E, kAbsoluteIndexedX, 3 },
    { "STA", 0x9F, kAbsoluteLongIndexedX, 4 },
    { "LDY", 0xA0, kImmediate, 2 },
    { "LDA", 0xA1, kDirectPageIndirectX, 2 },
    { "LDX", 0xA2, kImmediate, 2 },
    { "LDA", 0xA3, kStackRelativeIndirectIndexedY, 2 },
    { "LDY", 0xA4, kDirectPage, 2 },
    { "LDA", 0xA5, kDirectPage, 2 },
    { "LDX", 0xA6, kDirectPage, 2 },
    { "LDA", 0xA7, kDirectPageIndirectLong, 2 },
    { "TAY", 0xA8, kNone, 1 },
    { "LDA", 0xA9, kImmediate, 2 },
    { "TAX", 0xAA, kNone, 1 },
    { "PLB", 0xAB, kNone, 1 },
    { "LDY", 0xAC, kAbsolute, 3 },
    { "LDA", 0xAD, kAbsolute, 3 },
    { "LDX", 0xAE, kAbsolute, 3 },
    { "LDA", 0xAF, kAbsoluteLong, 4 },
    { "BCS", 0xB0, kBranch, 2 },
    { "LDA", 0xB1, kDirectPageIndirectIndexedY, 2 },
    { "LDA", 0xB2, kDirectPageIndirect, 2 },
    { "LDA", 0xB3, kStackRelativeIndirectIndexedY, 2 },
    { "LDY", 0xB4, kDirectPageIndexedX, 2 },
    { "LDA", 0xB5, kDirectPageIndexedX, 2 },
    { "LDX", 0xB6, kDirectPageIndexedY, 2 },
    { "LDA", 0xB7, kDirectPageIndirectLongIndexedY, 2 },
    { "CLV", 0xB8, kNone, 1 },
    { "LDA", 0xB9, kAbsoluteIndexedY, 3 },
    { "TSX", 0xBA, kNone, 1 },
    { "TYX", 0xBB, kNone, 1 },
    { "LDY", 0xBC, kAbsoluteIndexedX, 3 },
    { "LDA", 0xBD, kAbsoluteIndexedX, 3 },
    { "LDX", 0xBE, kAbsoluteIndexedY, 3 },
    { "LDA", 0xBF, kAbsoluteLongIndexedX, 4 },
    { "CPY", 0xC0, kImmediate, 2 },
    { "CMP", 0xC1, kDirectPageIndirectX, 2 },
    { "REP", 0xC2, kImmediate8, 2 },
    { "CMP", 0xC3, kStackRelative, 2 },
    { "CPY", 0xC4, kDirectPage, 2 },
    { "CMP", 0xC5, kDirectPage, 2 },
    { "DEC", 0xC6, kDirectPage, 2 },
    { "CMP", 0xC7, kDirectPageIndirectLong, 2 },
    { "INY", 0xC8, kNone, 1 },
    { "CMP", 0xC9, kImmediate, 2 },
    { "DEX", 0xCA, kNone, 1 },
    { "WAI", 0xCB, kNone, 1 },
    { "CPY", 0xCC, kAbsolute, 3 },
    { "CMP", 0xCD, kAbsolute, 3 },
    { "DEC", 0xCE, kAbsolute, 3 },
    { "CMP", 0xCF, kAbsoluteLong, 4 },
    { "BNE", 0xD0, kBranch, 2 },
    { "CMP", 0xD1, kDirectPageIndirectIndexedY, 2 },
    { "CMP", 0xD2, kDirectPageIndirect, 2 },
    { "CMP", 0xD3, kStackRelativeIndirectIndexedY, 2 },
    { "PEI", 0xD4, kDirectPageIndirect, 2 },
    { "CMP", 0xD5, kDirectPageIndexedX, 2 },
    { "DEC", 0xD6, kDirectPageIndexedX, 2 },
    { "CMP", 0xD7, kDirectPageIndirectLongIndexedY, 2 },
    { "CLD", 0xD8, kNone, 1 },
    { "CMP", 0xD9, kAbsoluteIndexedY, 3 },
    { "PHX", 0xDA, kNone, 1 },
    { "STP", 0xDB, kNone, 1 },
    { "JML", 0xDC, kAbsoluteLong, 4 },
    { "CMP", 0xDD, kAbsoluteIndexedX, 3 },
    { "DEC", 0xDE, kAbsoluteIndexedX, 3 },
    { "CMP", 0xDF, kAbsoluteLongIndexedX, 4 },
    { "CPX", 0xE0, kImmediate, 2 },
    { "SBC", 0xE1, kDirectPageIndirectX, 2 },
    { "SEP", 0xE2, kImmediate8, 2 },
    { "SBC", 0xE3, kStackRelative, 2 },
    { "CPX", 0xE4, kDirectPage, 2 },
    { "SBC", 0xE5, kDirectPage, 2 },
    { "INC", 0xE6, kDirectPage, 2 },
    { "SBC", 0xE7, kDirectPageIndirectLong, 2 },
    { "INX", 0xE8, kNone, 1 },
    { "SBC", 0xE9, kImmediate, 2 },
    { "NOP", 0xEA, kNone, 1 },
    { "XBA", 0xEB, kNone, 1 },
    { "CPX", 0xEC, kAbsolute, 3 },
    { "SBC", 0xED, kAbsolute, 3 },
    { "INC", 0xEE, kAbsolute, 3 },
    { "SBC", 0xEF, kAbsoluteLong, 4 },
    { "BEQ", 0xF0, kBranch, 2 },
    { "SBC", 0xF1, kDirectPageIndirectIndexedY, 2 },
    { "SBC", 0xF2, kDirectPageIndirect, 2 },
    { "SBC", 0xF3, kStackRelativeIndirectIndexedY, 2 },
    { "PEA", 0xF4, kImmediate16, 3 },
    { "SBC", 0xF5, kDirectPageIndexedX, 2 },
    { "INC", 0xF6, kDirectPageIndexedX, 2 },
    { "SBC", 0xF7, kDirectPageIndirectLongIndexedY, 2 },
    { "SED", 0xF8, kNone, 1 },
    { "SBC", 0xF9, kAbsoluteIndexedY, 3 },
    { "PLX", 0xFA, kNone, 1 },
    { "XCE", 0xFB, kNone, 1 },
    { "JSR", 0xFC, kAbsoluteIndexedIndirectX, 3 },
    { "SBC", 0xFD, kAbsoluteIndexedX, 3 },
    { "INC", 0xFE, kAbsoluteIndexedX, 3 },
    { "SBC", 0xFF, kAbsoluteLongIndexedX, 4 },
};

#endif